import{c as l}from"./include.dom-23a81602.js";function d(n){const e=atob(n.split(",")[1]),t=n.match(/:([a-z\/\-]+);/)[1];let o=new Uint8Array(e.length);for(let i=0;i<e.length;i++)o[i]=e.charCodeAt(i);return new Blob([o],{type:t})}const m={liveDom:{base:l.base(),contentPanel:l.contentPanel(),__contentPanel:{__history:{}}},init:async function(){this.config=await window.electron.ipcRenderer.invoke("get-config"),this.windowControl(),this.contentPanel()},windowControl:function(){this.liveDom.base.querySelector("div#close-win > button")?.addEventListener("click",()=>{window.electron.ipcRenderer.send("window-hide","clipboard")}),this.liveDom.base.querySelector("div#maximize-win button")?.addEventListener("click",()=>{window.electron.ipcRenderer.send("window-maximize","clipboard")}),this.liveDom.base.querySelector("div#minimize-win button")?.addEventListener("click",()=>{window.electron.ipcRenderer.send("window-minize","clipboard")});const n=this.liveDom.base.querySelector("div#fixation-win button");this.config?.window?.clipboard.isFixation&&(n.classList.add("active"),n.title="ウィンドウの固定を解除",n.ariaLabel="ウィンドウの固定を解除"),n.addEventListener("click",()=>{window.electron.ipcRenderer.invoke("clipboard-win-show-top").then(e=>{e?(n.classList.add("active"),n.title="ウィンドウの固定を解除",n.ariaLabel="ウィンドウの固定を解除"):(n.classList.remove("active"),n.title="ウィンドウを最前面に固定",n.ariaLabel="ウィンドウを最前面に固定")})}),document.getElementById("app")?.append(this.liveDom.base)},contentPanel:function(){this.liveDom.__contentPanel.history=this.liveDom.contentPanel.querySelector("div.content.history"),this.liveDom.__contentPanel.__history.recordList=this.liveDom.__contentPanel.history.querySelector("ul.record-list"),[...this.liveDom.contentPanel.querySelectorAll("div.tab-labels input.tab")].forEach(e=>{e.addEventListener("click",()=>{const t=this.liveDom.contentPanel.querySelector("div.tab-content > div.content.show");t.classList.remove("show"),t.inert=!0;const o=this.liveDom.contentPanel.querySelector(`div.tab-content > div.${e.value}`);o.classList.add("show"),o.inert=!1})});let n=!1;window.electron.ipcRenderer.on("clipboard-update",(e,t)=>{if(n){n=!1;return}const o=document.createElement("li"),i=document.createElement("span"),s=document.createElement("span"),a=document.createElement("button");if(o.classList.add("record"),s.classList.add("operation"),a.classList.add("copy"),a.title="クリップボードに送る",a.ariaLabel="クリップボードに送る",a.innerHTML='<i class="fa-solid fa-copy"></i>',a.addEventListener("click",()=>{window.electron.ipcRenderer.send("clipboard-write",[t[0][0],t[0][1]]),n=!0}),t[0][0]==="text/plain"&&typeof t[0][1]=="string")i.textContent=t[0][1],i.title=t[0][1],i.classList.add("view-text");else if(t[0][0]==="text/html"&&typeof t[0][1]=="string"){let r=!1;t.forEach(c=>{c[0].indexOf("image/")&&(r=!0)}),r?(i.innerHTML=t[0][1],i.title="画像",i.classList.add("view-img")):(i.textContent=t[0][1],i.title=t[0][1],i.classList.add("view-text"))}else if(t[0][0].indexOf("image/")>=0){const r=document.createElement("img");r.alt="画像",r.src=window.URL.createObjectURL(d(t[0][1])),i.appendChild(r),i.classList.add("view-img")}o.appendChild(i),s.appendChild(a),o.appendChild(s),this.liveDom.__contentPanel.__history.recordList?.insertAdjacentElement("afterbegin",o)}),this.liveDom.contentPanel.querySelector("#toggle-preview-panel").addEventListener("click",e=>{e.stopPropagation(),e.currentTarget.dataset.isShow==="false"?(e.currentTarget.innerHTML='<i class="fa-solid fa-angles-left"></i>',e.currentTarget.title="プレビューパネルを閉じる",e.currentTarget.ariaLabel="プレビューパネルを閉じる",e.currentTarget.dataset.isShow="true"):(e.currentTarget.innerHTML='<i class="fa-solid fa-arrow-right-to-bracket"></i>',e.currentTarget.title="保存されたクリップボードのプレビューを表示",e.currentTarget.ariaLabel="保存されたクリップボードのプレビューを表示",e.currentTarget.dataset.isShow="false")}),this.liveDom.base.querySelector("main#insert-panel").insertAdjacentElement("beforeend",this.liveDom.contentPanel)}};document.addEventListener("DOMContentLoaded",()=>{m.init()});
